---
SPDX-License-Identifier: MIT
path: "/tutorials/install-kvm-ubuntu-2204"
slug: "install-kvm-ubuntu-2204"
date: "2024-07-17"
title: "Install KVM on Ubuntu 22.04"
short_description: "This is a tutorial template, including metadata (the first few lines before the actual tutorial). Please fill in as much as possible. If you don't know what to put somewhere, just leave it empty, the Community Manager will fill it for you. Your description should be less than 160 characters."
tags: ["Development", "Lang:bash", "Lang:JS"]
author: "Atilla Özgür"
author_link: "https://github.com/ati-ozgur"
author_img: "https://avatars.githubusercontent.com/u/2980804?v=4"
author_description: "I started programming in 1989 with basic in middle school. I consider myself a web application programmer, a database developer and a researcher"
language: "en"
available_languages: ["en", "Enter all other available languages of the tutorial using ISO 639-1 codes"]
header_img: "header-x"
cta: "product"
---

## Introduction


KVM main page
https://www.linux-kvm.org/page/Main_Page


KVM installation 
https://sysguides.com/install-kvm-on-linux


```bash
zgrep CONFIG_KVM /boot/config-$(uname -r)
```

```bash
sudo apt install qemu-system-x86 libvirt-daemon-system virtinst \
    virt-manager virt-viewer ovmf swtpm qemu-utils guestfs-tools \
    libosinfo-bin tuned
```

description of the installed packages.


```bash
sudo systemctl enable libvirtd.service
```


```bash
sudo virt-host-validate qemu
```

```bash
QEMU: Checking for hardware virtualization                                 : PASS
QEMU: Checking if device /dev/kvm exists                                   : PASS
QEMU: Checking if device /dev/kvm is accessible                            : PASS
QEMU: Checking if device /dev/vhost-net exists                             : PASS
QEMU: Checking if device /dev/net/tun exists                               : PASS
QEMU: Checking for cgroup 'cpu' controller support                         : PASS
QEMU: Checking for cgroup 'cpuacct' controller support                     : PASS
QEMU: Checking for cgroup 'cpuset' controller support                      : PASS
QEMU: Checking for cgroup 'memory' controller support                      : PASS
QEMU: Checking for cgroup 'devices' controller support                     : PASS
QEMU: Checking for cgroup 'blkio' controller support                       : PASS
QEMU: Checking for device assignment IOMMU support                         : PASS
QEMU: Checking if IOMMU is enabled by kernel                               : WARN (IOMMU appears to be disabled in kernel. Add intel_iommu=on to kernel cmdline arguments)
QEMU: Checking for secure guest support                                    : WARN (Unknown if this platform has Secure Guest support)
```

sudo nano /etc/default/grub
...
GRUB_CMDLINE_LINUX="... intel_iommu=on iommu=pt"


sudo update-grub

sudo reboot

sudo virt-host-validate qemu


dmesg | grep -i -e DMAR -e IOMMU

  QEMU: Checking for hardware virtualization                                 : PASS
  QEMU: Checking if device /dev/kvm exists                                   : PASS
  QEMU: Checking if device /dev/kvm is accessible                            : PASS
  QEMU: Checking if device /dev/vhost-net exists                             : PASS
  QEMU: Checking if device /dev/net/tun exists                               : PASS
  QEMU: Checking for cgroup 'cpu' controller support                         : PASS
  QEMU: Checking for cgroup 'cpuacct' controller support                     : PASS
  QEMU: Checking for cgroup 'cpuset' controller support                      : PASS
  QEMU: Checking for cgroup 'memory' controller support                      : PASS
  QEMU: Checking for cgroup 'devices' controller support                     : PASS
  QEMU: Checking for cgroup 'blkio' controller support                       : PASS
  QEMU: Checking for device assignment IOMMU support                         : PASS
  QEMU: Checking if IOMMU is enabled by kernel                               : PASS
  QEMU: Checking for secure guest support                                    : WARN (Unknown if this platform has Secure Guest support)


. Optimize the Host with TuneD

sudo systemctl enable --now tuned

tuned-adm active

tuned-adm list

sudo tuned-adm profile virtual-host

sudo tuned-adm verify


Verification failed, current system settings differ from the preset profile.
You can mostly fix this by restarting the Tuned daemon, e.g.:
  systemctl restart tuned
or
  service tuned restart
Sometimes (if some plugins like bootloader are used) a reboot may be required.
See tuned log file ('/var/log/tuned/tuned.log') for details.


sudo reboot

But tuned is problematic

tuned-adm off


## Install Tuned

https://github.com/redhat-performance/tuned


## Install Cockpit 

sudo apt-get update

sudo apt-get install cockpit

sudo ufw allow 9090/tcp


https://your_server_ip:9090



sudo virsh net-list --all
 Name      State    Autostart   Persistent
--------------------------------------------
 default   active   yes         yes






## Cockpit


https://cockpit-project.org/


https://docs.fedoraproject.org/en-US/fedora-server/virtualization/vm-management-cockpit/
https://docs.oracle.com/en/operating-systems/oracle-linux/cockpit/cockpit-kvm_create_a_virtual_machine.html

## Windows development

https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/

## Install Oracle 23ai using VirtualBox Image


https://www.oracle.com/database/technologies/databaseappdev-vm.html


https://linuxconfig.org/converting-virtualbox-ova-to-qcow2-for-qemu-kvm-deployment

tar


The first paragraph or paragraphs are there for you to explain what your tutorial will do. Please don't simply list the steps you will be following, a table of contents (TOC) with the steps will be automatically added.
Make sure users know exactly what they will end up with if they follow your tutorial, and let them know if they need any specific prerequisites.
You can link to other tutorials that your tutorial builds on, and add recommendations for what users should know.

**Prerequisites**

If there are any prerequisites for your tutorial, please write them out here.
If there is already a tutorial explaining one of the prerequisites, make sure to link to that other tutorial.

For example:

* Hetzner Cloud [API token](https://docs.hetzner.com/cloud/api/getting-started/generating-api-token) in the [Cloud Console](https://console.hetzner.cloud/)
* [SSH key](https://community.hetzner.com/tutorials/howto-ssh-key)

**Example terminology**

Many tutorials will need to include example usernames, hostnames, domains, and IPs. To simplify this, all tutorials should use the same default examples, as outlined below.

* Username: `holu` (short for Hetzner OnLine User)
* Hostname: `<your_host>`
* Domain: `<example.com>`
* Subdomain: `<sub.example.com>`
* IP addresses (IPv4 and IPv6):
   * Server: `<10.0.0.1>` and `<2001:db8:1234::1>`
   * Gateway `<192.0.2.254>` and `<2001:db8:1234::ffff>`
   * Client private: `<198.51.100.1>` and `<2001:db8:9abc::1>`
   * Client public: `<203.0.113.1>` and `<2001:db8:5678::1>`

Do **not** use actual IPs in your tutorial.

## Step 1 - Summary of Step


[KVM installation in Ubuntu Documentation][1]


Steps are the actual steps users will be taking to complete your tutorial.

Each step should build on the previous one, until the final step that finishes the tutorial.

It is important not to skip any steps, no matter how obvious or self-explanatory they may seem.

Feel free to include screenshots, to show exactly what the user should be seeing. Please put screenshots in a separate "images" folder.

The amount of steps will depend entirely on how long/complicated the tutorial is.

## Step 2 - Summary of Step

Quick introduction.

Start by...

![Screenshot Description](images/screenshot_description.png)

Then...

Finally...

### Step 2.1 - Summary of Step

You can create code examples in nearly every programming language.
Just state the language after the first three backticks in your Markdown file.

Here is a code example

```javascript
var s = "JavaScript syntax highlighting";
alert(s);
```

### Step 2.2 - Summary of Step

Another code example

```python
s = "Python syntax highlighting"
print s
```

## Step 3 - Summary of Step (Optional)

Instructions for a step that is not necessary to complete the tutorial, but can be helpful.

## Step N - Summary of Step

Yet more instructions.

## Conclusion

A short conclusion summarizing what the user has done, and maybe suggesting different courses of action they can now take.

## References

[1]: <https://help.ubuntu.com/community/KVM/Installation> "Ubuntu Community KVM installation"

##### License: MIT

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Atilla Özgür ati.ozgur@gmail.com

-->
